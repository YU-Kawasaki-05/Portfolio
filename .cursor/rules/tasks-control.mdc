---
description: 
globs: 
alwaysApply: false
---
---
description: >
  タスク管理ファイル (`tasks.md` もしくは `tasks/**/*.md`) の
  チェックボックスを **AI が Agent モードでタスク完了時に自動更新** するルール。
  “☐” を “☑” に置換し、必要ならタイムスタンプも追記する。

applyMode: Agent Requested
globs:
  - "tasks.md"
  - "tasks/**/*.md"
ruleType: task_control
---

- **タスク完了時の処理手順**  
  1. **ID で行を検索** — 例: `| **300** |` を正規表現 `\| \*\*300\*\* \|` で特定。  
  2. 行内の **未完チェック** (`☐`) を **完了チェック** (`☑`) に置換する。  
  3. （任意）行末に `<!-- done:YYYY-MM-DD -->` を追加。重複しないこと。  
  4. `tasks.md` を保存し、コミットメッセージは **“chore(tasks): close #300”** の形式。  

- **部分達成のとき**  
  - 🟡 を使用 (`🟡`) し、「レビュー待ち」「QA 中」などメモを HTML コメントで付与。  
    例: `| **301** | … | 🟡 | <!-- waiting for QA -->`  

- **複数タスク同時完了**  
  - スクリプト的に複数行を置換してから 1 コミットにまとめる。  

- **エラー処理**  
  - 該当 ID が無い場合は行頭に `<!-- TODO: ID 301 not found -->` を追加し、  
    チャットでユーザーに警告する。  

- **禁止事項**  
  - 人間が未確認のタスクを勝手に完了にしない。  
  - Markdown の列幅を崩さない。パイプ記号 `|` の数を維持する。  

> **Tip**: `tasks.md` 以外にも進捗表を増やす場合は、同階層に置いて同じルールが効くよう  
> `tasks/**/*.md` の glob を利用して下さい。

